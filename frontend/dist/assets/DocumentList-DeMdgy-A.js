import{_ as ml,z as yl,r as v,c as Pe,o as wl,A as _l,B as gl,b as x,e as c,f as a,C as be,D as h,h as r,w as t,g as P,E as kl,i as C,G as Cl,H as $e,F as J,k as de,I as xe,J as Vl,p as b,n as D,t as U,K as Pl,L as bl,M as $l,N as xl,O as _,P as i,x as Tl,Q as ee,y as f,R as Te,S as le,T as Dl,U as Sl,V as Bl,d as Il}from"./index-6DHakvZj.js";import{s as De,v as ce,c as Ul}from"./privacy-F99ZVvUi.js";const zl={class:"document-container"},Ml={class:"sidebar"},Al={class:"view-section"},Fl={class:"folder-group"},hl={class:"folder-header"},Ll=["onClick","draggable","onDragstart","onDrop"],El={class:"folder-name"},Hl={class:"view-section"},Rl={class:"view-section"},ql={class:"main-content"},Nl={class:"toolbar"},Yl={class:"left-tools"},Kl={class:"view-title"},Ol={class:"right-tools"},jl={key:0,class:"bulk-actions"},Ql={class:"doc-list"},Gl={key:0,class:"empty-state"},Jl=["onClick"],Wl=["onClick"],Xl={class:"doc-header"},Zl={class:"doc-title"},ea=["innerHTML"],la={class:"doc-meta"},aa={class:"doc-actions"},ta=["innerHTML"],sa={class:"dialog-footer"},oa={class:"dialog-footer"},na={class:"folder-list-select"},ra=["onClick"],ia={class:"dialog-footer"},ua={class:"dialog-footer"},da={class:"dialog-footer"},ca={class:"dialog-footer"},va={__name:"DocumentList",setup(pa){const ve=Tl(),Se=_l(),g=yl(),ae=v(!1),z=v([]),k=v([]),m=v(new Set),M=()=>{m.value=new Set},W=v(""),u=v("all"),p=v(null),X=v("updated_at"),te=v("desc");let Y=null;const K=v(!1),L=v(null),E=v(!1),se=v("新建文件夹"),S=v({id:null,name:""}),H=v(!1),R=v(null),Z=v(null),oe=v(!1),pe=v(null),ne=v(null),O=v(!1),A=v({password:"",confirmPassword:""}),Be=v(!1),j=v(!1),q=v(""),Q=v(!1),B=v({oldPassword:"",newPassword:"",confirmPassword:""}),Ie=Pe(()=>u.value==="privacy"?"隐私空间":u.value==="recycle"?"回收站":p.value?p.value.name:"全部文档"),Ue=Pe(()=>{const l={created_at:"创建时间",updated_at:"更新时间"},e={asc:"正序",desc:"倒序"};return`${l[X.value]} (${e[te.value]})`}),w=async()=>{ae.value=!0;try{const l={sort_by:X.value,order:te.value,q:W.value};u.value==="recycle"?l.recycle_bin=!0:(u.value==="privacy"&&(l.privacy_space=!0,g.password&&(l._privacy_password=g.password)),p.value&&(l.folder_id=p.value.id));const e=await _.get("/docs/",{params:l});z.value=e,dl()}catch{i.error("获取文档列表失败")}finally{ae.value=!1}},ze=()=>{Y&&clearTimeout(Y),Y=setTimeout(()=>{w()},400)},F=async()=>{if(u.value==="privacy"){k.value=[],M();return}try{const l=u.value==="privacy",e={in_privacy_space:l},o=await _.get("/docs/folders",{params:e});let n=o.find(d=>d.name==="未分组");if(!n)try{n=await _.post("/docs/folders",{name:"未分组",in_privacy_space:l}),o.push(n)}catch(d){console.error("创建未分组文件夹失败",d)}k.value=o.sort((d,y)=>d.name==="未分组"?-1:y.name==="未分组"?1:d.order-y.order)}catch(l){console.error("获取文件夹失败",l)}},re=async l=>{if(l==="privacy"){await Me();return}u.value=l,p.value=null,M(),F(),w()},Me=async()=>{var l,e,o;try{console.log("开始访问隐私空间，检查密码状态...");const{has_password:n}=await Ul();if(console.log("密码检查结果:",n),!n){Be.value=!0,A.value={password:"",confirmPassword:""},O.value=!0;return}if(g.needsReauth()){console.log("需要重新验证密码"),q.value="",j.value=!0;return}console.log("已验证，直接进入隐私空间"),g.updateLastAccessTime(),u.value="privacy",p.value=null,w()}catch(n){console.error("检查隐私空间状态失败:",n),console.error("错误详情:",(l=n.response)==null?void 0:l.data),i.error(((o=(e=n.response)==null?void 0:e.data)==null?void 0:o.msg)||"检查隐私空间状态失败")}},Ae=async()=>{var o,n;const{password:l,confirmPassword:e}=A.value;if(!l||l.length<6){i.warning("密码长度不能少于6位");return}if(l!==e){i.warning("两次输入的密码不一致");return}try{await De(l),i.success("隐私空间密码设置成功");const{access_token:d}=await ce(l);g.setAccessToken(d),g.setPassword(l),O.value=!1,u.value="privacy",p.value=null,F(),w()}catch(d){i.error(((n=(o=d.response)==null?void 0:o.data)==null?void 0:n.msg)||"设置失败")}},fe=async()=>{var l,e;if(!q.value){i.warning("请输入密码");return}try{const{access_token:o}=await ce(q.value);g.setAccessToken(o),g.setPassword(q.value),i.success("验证成功"),j.value=!1,u.value="privacy",p.value=null,F(),w()}catch(o){i.error(((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.msg)||"密码错误")}},Fe=()=>{B.value={oldPassword:"",newPassword:"",confirmPassword:""},Q.value=!0},he=async()=>{var n,d;const{oldPassword:l,newPassword:e,confirmPassword:o}=B.value;if(!l){i.warning("请输入当前密码");return}if(!e||e.length<6){i.warning("新密码长度不能少于6位");return}if(e!==o){i.warning("两次输入的新密码不一致");return}try{await De(e,l),i.success("密码修改成功");const{access_token:y}=await ce(e);g.setAccessToken(y),g.setPassword(e),Q.value=!1}catch(y){i.error(((d=(n=y.response)==null?void 0:n.data)==null?void 0:d.msg)||"修改失败")}},Le=l=>{p.value=l,M(),w()},Ee=l=>{const[e,o]=l.split("|");X.value=e,te.value=o,w()},He=()=>{const l={view:u.value};p.value&&(l.folderId=p.value.id,l.folderName=p.value.name),u.value==="privacy"&&(l.privacy="true"),ve.push({path:"/documents/create",query:l})},Re=(l,e)=>{ne.value=e,l.dataTransfer.effectAllowed="move"},qe=l=>{l.preventDefault(),l.dataTransfer.dropEffect="move"},Ne=async(l,e)=>{l.preventDefault();const o=ne.value,n=e;if(o===null||o===n||k.value[o].name==="未分组"||k.value[n].name==="未分组")return;const d=k.value.splice(o,1)[0];k.value.splice(n,0,d);try{const y=k.value.map((T,V)=>({id:T.id,order:V}));await _.put("/docs/folders/reorder",y)}catch{i.error("排序更新失败"),F()}ne.value=null},Ye=()=>{pe.value.click()},Ke=async l=>{const e=l.target.files[0];if(e)try{const o=new FileReader;o.onload=async n=>{try{const d=n.target.result,y=e.name.replace(/\.[^/.]+$/,""),T=k.value.find(ue=>ue.name==="未分组"),V=T==null?void 0:T.id;if(!V){i.error('未找到"未分组"文件夹，无法导入');return}await _.post("/docs/",{title:y,content:d,folder_id:V,in_privacy_space:u.value==="privacy"}),i.success("文档导入成功"),w()}catch{i.error("文档导入失败")}},o.readAsText(e)}catch{i.error("文件读取失败")}finally{l.target.value=""}},Oe=l=>{L.value=l,K.value=!0},me=l=>{K.value=!1;const e={};u.value&&(e.view=u.value),p.value&&(e.folderId=p.value.id,e.folderName=p.value.name),(l.in_privacy_space||u.value==="privacy")&&(e.privacy="true"),ve.push({path:`/documents/edit/${l.id}`,query:e})},je=l=>{const e=new Set(m.value);e.has(l.id)?e.delete(l.id):e.add(l.id),m.value=e},Qe=(l,e)=>{const o=new Set(m.value);e?o.add(l.id):o.delete(l.id),m.value=o},Ge=()=>{m.value.size===z.value.length?M():m.value=new Set(z.value.map(l=>l.id))},Je=async l=>{try{await _.put(`/docs/${l.id}`,{is_pinned:!l.is_pinned}),i.success(l.is_pinned?"已取消置顶":"已置顶"),w()}catch{i.error("操作失败")}},We=(l,e)=>{l==="edit"&&me(e),l==="delete"&&ie(e),l==="move"&&(Z.value=e,oe.value=!1,R.value=e.folder_id||(k.value.length>0?k.value[0].id:null),H.value=!0),l==="privacy"&&ye(e,!0),l==="public"&&ye(e,!1),l==="share"&&we()},ye=async(l,e)=>{try{await _.put(`/docs/${l.id}`,{in_privacy_space:e}),i.success(e?"已移入隐私空间":"已移出隐私空间"),w()}catch{i.error("操作失败")}},ie=async(l,e=!1)=>{try{const o=e||u.value==="privacy"?"确定要彻底删除这个文档吗？此操作无法恢复。":"确定要删除这个文档吗？它将被移入回收站。";await ee.confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.delete(`/docs/${l.id}`,{params:{hard_delete:e}}),i.success("删除成功"),K.value=!1,w()}catch(o){o!=="cancel"&&i.error("删除失败")}},Xe=async l=>{try{await _.put(`/docs/${l.id}`,{restore:!0}),i.success("恢复成功"),w()}catch{i.error("恢复失败")}},Ze=async()=>{try{await ee.confirm("确定要清空回收站吗？所有文档将无法恢复。","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.delete("/docs/recycle-bin/clear"),i.success("回收站已清空"),w()}catch(l){l!=="cancel"&&i.error("清空失败")}},we=l=>{i.success("分享链接已复制到剪贴板 (模拟)")},el=()=>{S.value={id:null,name:""},se.value="新建文件夹",E.value=!0},ll=(l,e)=>{if(l==="rename"){if(e.name==="未分组"){i.warning("未分组文件夹不可重命名");return}S.value={id:e.id,name:e.name},se.value="重命名文件夹",E.value=!0}if(l==="delete"){if(e.name==="未分组"){i.warning("未分组文件夹不可删除");return}ee.confirm("确定要删除这个文件夹吗？","提示",{type:"warning"}).then(async()=>{var o,n,d;try{await _.delete(`/docs/folders/${e.id}`),i.success("删除成功"),((o=p.value)==null?void 0:o.id)===e.id&&(p.value=null,u.value="all"),F()}catch(y){i.error(((d=(n=y.response)==null?void 0:n.data)==null?void 0:d.msg)||"删除失败")}})}},al=async()=>{if(S.value.name)try{if(S.value.id)await _.put(`/docs/folders/${S.value.id}`,{name:S.value.name});else{const l=u.value==="privacy";await _.post("/docs/folders",{name:S.value.name,in_privacy_space:l})}E.value=!1,F(),i.success("操作成功")}catch{i.error("操作失败")}},tl=async()=>{try{if(oe.value){const l=Array.from(m.value);if(u.value==="privacy"&&!g.password){i.error("缺少隐私空间密码，无法移动隐私文档");return}await Promise.all(l.map(e=>{const o={folder_id:R.value};return u.value==="privacy"&&(o._privacy_password=g.password),_.put(`/docs/${e}`,o)})),i.success("批量移动成功"),M()}else if(Z.value){const l={folder_id:R.value};Z.value.in_privacy_space&&(l._privacy_password=g.password),await _.put(`/docs/${Z.value.id}`,l),i.success("移动成功")}H.value=!1,w()}catch{i.error("移动失败")}},sl=l=>Il(l).format("YYYY年 M月 D日 HH:mm:ss"),ol=(l="")=>l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),nl=l=>{const e=(l||"").replace(/<[^>]+>/g,""),o=(W.value||"").trim();if(!o)return e||"无内容";const n=ol(e);if(!n)return"无内容";try{const d=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),y=new RegExp(d,"gi");return n.replace(y,T=>`<span class="hl">${T}</span>`)}catch{return n}},rl=l=>{const o=X.value==="created_at"?l.created_at:l.updated_at;return sl(o)},il=()=>{var l,e;m.value.size!==0&&(oe.value=!0,R.value=((l=p.value)==null?void 0:l.id)||(((e=k.value[0])==null?void 0:e.id)??null),H.value=!0)},_e=async l=>{if(m.value.size!==0){if(!l&&!g.password){i.error("缺少隐私空间密码，无法移出隐私空间");return}try{await Promise.all(Array.from(m.value).map(e=>{const o={in_privacy_space:l};return l||(o._privacy_password=g.password),_.put(`/docs/${e}`,o)})),i.success(l?"已移入隐私空间":"已移出隐私空间"),M(),w()}catch{i.error("批量操作失败")}}},ul=async()=>{if(m.value.size!==0)try{await ee.confirm("确定要删除选中文档吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Promise.all(Array.from(m.value).map(l=>_.delete(`/docs/${l}`,{params:{hard_delete:u.value==="privacy"}}))),i.success("删除成功"),M(),w()}catch(l){l!=="cancel"&&i.error("删除失败")}};wl(()=>{const{view:l,folderId:e}=Se.query;l&&(u.value=l),F(),e?setTimeout(()=>{const o=k.value.find(n=>n.id===parseInt(e));o&&(p.value=o),w()},100):w()}),gl(()=>{Y&&clearTimeout(Y)});const dl=()=>{const l=new Set(z.value.map(o=>o.id)),e=new Set;m.value.forEach(o=>{l.has(o)&&e.add(o)}),m.value=e};return(l,e)=>{var Ce;const o=C("el-icon"),n=C("el-button"),d=C("el-dropdown-item"),y=C("el-dropdown-menu"),T=C("el-dropdown"),V=C("el-input"),ue=C("el-empty"),cl=C("el-checkbox"),vl=C("el-tag"),pl=C("el-tooltip"),N=C("el-dialog"),ge=C("el-alert"),G=C("el-form-item"),ke=C("el-form"),fl=$l("loading");return f(),x("div",zl,[c("div",Ml,[c("div",Al,[c("div",{class:h(["view-header",{active:u.value==="all"&&!p.value}]),onClick:e[0]||(e[0]=s=>re("all"))},[a(o,null,{default:t(()=>[a(P(kl))]),_:1}),e[30]||(e[30]=r(" 全部文档 ",-1))],2),be(c("div",Fl,[c("div",hl,[e[31]||(e[31]=c("span",null,"文件夹",-1)),a(n,{link:"",type:"primary",onClick:el},{default:t(()=>[a(o,null,{default:t(()=>[a(P($e))]),_:1})]),_:1})]),(f(!0),x(J,null,de(k.value,(s,$)=>{var Ve;return f(),x("div",{key:s.id,class:h(["nav-item folder-item",{active:((Ve=p.value)==null?void 0:Ve.id)===s.id,"draggable-folder":s.name!=="未分组"}]),onClick:I=>Le(s),draggable:s.name!=="未分组",onDragstart:I=>Re(I,$),onDragover:e[2]||(e[2]=I=>qe(I)),onDrop:I=>Ne(I,$)},[c("span",El,[a(o,null,{default:t(()=>[a(P(Te))]),_:1}),r(" "+U(s.name),1)]),a(T,{trigger:"click",onCommand:I=>ll(I,s)},{dropdown:t(()=>[a(y,null,{default:t(()=>[a(d,{command:"rename",disabled:s.name==="未分组"},{default:t(()=>[...e[32]||(e[32]=[r("重命名",-1)])]),_:1},8,["disabled"]),a(d,{command:"delete",class:"text-danger",disabled:s.name==="未分组"},{default:t(()=>[...e[33]||(e[33]=[r("删除",-1)])]),_:1},8,["disabled"])]),_:2},1024)]),default:t(()=>[c("span",{class:"folder-actions",onClick:e[1]||(e[1]=le(()=>{},["stop"]))},[a(o,null,{default:t(()=>[a(P(Dl))]),_:1})])]),_:2},1032,["onCommand"])],42,Ll)}),128))],512),[[Cl,u.value==="all"]])]),c("div",Hl,[c("div",{class:h(["view-header",{active:u.value==="privacy"}]),onClick:e[3]||(e[3]=s=>re("privacy"))},[a(o,null,{default:t(()=>[a(P(xe))]),_:1}),e[34]||(e[34]=r(" 隐私空间 ",-1))],2)]),c("div",Rl,[c("div",{class:h(["view-header",{active:u.value==="recycle"}]),onClick:e[4]||(e[4]=s=>re("recycle"))},[a(o,null,{default:t(()=>[a(P(Vl))]),_:1}),e[35]||(e[35]=r(" 回收站 ",-1))],2)])]),c("div",ql,[c("div",Nl,[c("div",Yl,[c("h2",Kl,U(Ie.value),1),u.value!=="recycle"?(f(),D(n,{key:0,type:"primary",onClick:He},{default:t(()=>[a(o,null,{default:t(()=>[a(P($e))]),_:1}),e[36]||(e[36]=r(" 新建文档 ",-1))]),_:1})):b("",!0),u.value!=="recycle"?(f(),D(n,{key:1,type:"success",plain:"",onClick:Ye},{default:t(()=>[a(o,null,{default:t(()=>[a(P(Pl))]),_:1}),e[37]||(e[37]=r(" 导入文档 ",-1))]),_:1})):b("",!0),u.value==="privacy"?(f(),D(n,{key:2,type:"warning",plain:"",onClick:Fe},{default:t(()=>[a(o,null,{default:t(()=>[a(P(xe))]),_:1}),e[38]||(e[38]=r(" 修改隐私密码 ",-1))]),_:1})):b("",!0),u.value==="recycle"?(f(),D(n,{key:3,type:"danger",plain:"",onClick:Ze},{default:t(()=>[...e[39]||(e[39]=[r(" 清空回收站 ",-1)])]),_:1})):b("",!0)]),c("div",Ol,[a(V,{modelValue:W.value,"onUpdate:modelValue":e[5]||(e[5]=s=>W.value=s),placeholder:"搜索文档...","prefix-icon":"Search",style:{width:"200px"},onInput:ze},null,8,["modelValue"]),a(T,{onCommand:Ee},{dropdown:t(()=>[a(y,null,{default:t(()=>[a(d,{command:"created_at|desc"},{default:t(()=>[...e[40]||(e[40]=[r("创建时间 (倒序)",-1)])]),_:1}),a(d,{command:"created_at|asc"},{default:t(()=>[...e[41]||(e[41]=[r("创建时间 (正序)",-1)])]),_:1}),a(d,{command:"updated_at|desc"},{default:t(()=>[...e[42]||(e[42]=[r("更新时间 (倒序)",-1)])]),_:1}),a(d,{command:"updated_at|asc"},{default:t(()=>[...e[43]||(e[43]=[r("更新时间 (正序)",-1)])]),_:1})]),_:1})]),default:t(()=>[a(n,null,{default:t(()=>[r(" 排序: "+U(Ue.value)+" ",1),a(o,{class:"el-icon--right"},{default:t(()=>[a(P(bl))]),_:1})]),_:1})]),_:1})])]),m.value.size>0&&u.value!=="recycle"?(f(),x("div",jl,[c("span",null,"已选中 "+U(m.value.size)+" 个文档",1),a(n,{size:"small",onClick:Ge},{default:t(()=>[r(U(m.value.size===z.value.length?"取消全选":"全选当前列表"),1)]),_:1}),a(n,{size:"small",onClick:il},{default:t(()=>[...e[44]||(e[44]=[r("移动至...",-1)])]),_:1}),u.value!=="privacy"?(f(),D(n,{key:0,size:"small",onClick:e[6]||(e[6]=s=>_e(!0))},{default:t(()=>[...e[45]||(e[45]=[r("移入隐私空间",-1)])]),_:1})):b("",!0),u.value==="privacy"?(f(),D(n,{key:1,size:"small",onClick:e[7]||(e[7]=s=>_e(!1))},{default:t(()=>[...e[46]||(e[46]=[r("移出隐私空间",-1)])]),_:1})):b("",!0),a(n,{size:"small",type:"danger",onClick:ul},{default:t(()=>[...e[47]||(e[47]=[r("删除",-1)])]),_:1})])):b("",!0),be((f(),x("div",Ql,[z.value.length===0?(f(),x("div",Gl,[a(ue,{description:"暂无文档"})])):b("",!0),(f(!0),x(J,null,de(z.value,s=>(f(),x("div",{key:s.id,class:h(["doc-item",{"is-pinned":s.is_pinned,"is-selected":m.value.has(s.id)}]),onClick:le($=>je(s),["self"])},[c("div",{class:"doc-select",onClick:e[8]||(e[8]=le(()=>{},["stop"]))},[a(cl,{"model-value":m.value.has(s.id),onChange:$=>Qe(s,$)},null,8,["model-value","onChange"])]),c("div",{class:"doc-content",onClick:$=>Oe(s)},[c("div",Xl,[c("span",Zl,U(s.title),1),s.is_pinned?(f(),D(vl,{key:0,size:"small",type:"warning",effect:"plain"},{default:t(()=>[...e[48]||(e[48]=[r("置顶",-1)])]),_:1})):b("",!0)]),c("div",{class:"doc-preview",innerHTML:nl(s.content)},null,8,ea),c("div",la,[c("span",null,U(rl(s)),1)])],8,Wl),c("div",aa,[u.value==="recycle"?(f(),x(J,{key:0},[a(n,{link:"",type:"primary",onClick:$=>Xe(s)},{default:t(()=>[...e[49]||(e[49]=[r("恢复",-1)])]),_:1},8,["onClick"]),a(n,{link:"",type:"danger",onClick:$=>ie(s,!0)},{default:t(()=>[...e[50]||(e[50]=[r("彻底删除",-1)])]),_:1},8,["onClick"])],64)):(f(),x(J,{key:1},[u.value!=="privacy"?(f(),D(pl,{key:0,content:"置顶",placement:"top"},{default:t(()=>[a(n,{link:"",onClick:le($=>Je(s),["stop"])},{default:t(()=>[a(o,{class:h({"is-active":s.is_pinned})},{default:t(()=>[a(P(Sl))]),_:1},8,["class"])]),_:2},1032,["onClick"])]),_:2},1024)):b("",!0),a(T,{trigger:"click",onCommand:$=>We($,s)},{dropdown:t(()=>[a(y,null,{default:t(()=>[a(d,{command:"edit"},{default:t(()=>[...e[51]||(e[51]=[r("编辑",-1)])]),_:1}),u.value!=="privacy"?(f(),D(d,{key:0,command:"move"},{default:t(()=>[...e[52]||(e[52]=[r("移动至...",-1)])]),_:1})):b("",!0),u.value!=="privacy"?(f(),D(d,{key:1,command:"privacy"},{default:t(()=>[...e[53]||(e[53]=[r("移入隐私空间",-1)])]),_:1})):b("",!0),u.value==="privacy"?(f(),D(d,{key:2,command:"public"},{default:t(()=>[...e[54]||(e[54]=[r("移出隐私空间",-1)])]),_:1})):b("",!0),a(d,{command:"share"},{default:t(()=>[...e[55]||(e[55]=[r("分享",-1)])]),_:1}),a(d,{divided:"",command:"delete",class:"text-danger"},{default:t(()=>[...e[56]||(e[56]=[r("删除",-1)])]),_:1})]),_:1})]),default:t(()=>[a(n,{link:""},{default:t(()=>[a(o,null,{default:t(()=>[a(P(Bl))]),_:1})]),_:1})]),_:1},8,["onCommand"])],64))])],10,Jl))),128))])),[[fl,ae.value]])]),a(N,{modelValue:K.value,"onUpdate:modelValue":e[12]||(e[12]=s=>K.value=s),title:(Ce=L.value)==null?void 0:Ce.title,width:"70%",top:"5vh"},{footer:t(()=>[c("div",sa,[a(n,{onClick:e[9]||(e[9]=s=>we(L.value))},{default:t(()=>[...e[57]||(e[57]=[r("分享",-1)])]),_:1}),a(n,{type:"primary",onClick:e[10]||(e[10]=s=>me(L.value))},{default:t(()=>[...e[58]||(e[58]=[r("编辑",-1)])]),_:1}),a(n,{type:"danger",onClick:e[11]||(e[11]=s=>ie(L.value))},{default:t(()=>[...e[59]||(e[59]=[r("删除",-1)])]),_:1})])]),default:t(()=>{var s;return[c("div",{class:"preview-content w-e-text-container",style:{border:"none"},innerHTML:(s=L.value)==null?void 0:s.content},null,8,ta)]}),_:1},8,["modelValue","title"]),a(N,{modelValue:E.value,"onUpdate:modelValue":e[15]||(e[15]=s=>E.value=s),title:se.value,width:"30%"},{footer:t(()=>[c("span",oa,[a(n,{onClick:e[14]||(e[14]=s=>E.value=!1)},{default:t(()=>[...e[60]||(e[60]=[r("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:al},{default:t(()=>[...e[61]||(e[61]=[r("确定",-1)])]),_:1})])]),default:t(()=>[a(V,{modelValue:S.value.name,"onUpdate:modelValue":e[13]||(e[13]=s=>S.value.name=s),placeholder:"请输入文件夹名称"},null,8,["modelValue"])]),_:1},8,["modelValue","title"]),a(N,{modelValue:H.value,"onUpdate:modelValue":e[17]||(e[17]=s=>H.value=s),title:"移动至",width:"30%"},{footer:t(()=>[c("span",ia,[a(n,{onClick:e[16]||(e[16]=s=>H.value=!1)},{default:t(()=>[...e[62]||(e[62]=[r("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:tl},{default:t(()=>[...e[63]||(e[63]=[r("确定",-1)])]),_:1})])]),default:t(()=>[c("div",na,[(f(!0),x(J,null,de(k.value,s=>(f(),x("div",{key:s.id,class:h(["folder-select-item",{active:R.value===s.id}]),onClick:$=>R.value=s.id},[a(o,null,{default:t(()=>[a(P(Te))]),_:1}),r(" "+U(s.name),1)],10,ra))),128))])]),_:1},8,["modelValue"]),a(N,{modelValue:O.value,"onUpdate:modelValue":e[21]||(e[21]=s=>O.value=s),title:"设置隐私空间密码",width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:t(()=>[c("span",ua,[a(n,{onClick:e[20]||(e[20]=s=>O.value=!1)},{default:t(()=>[...e[65]||(e[65]=[r("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:Ae},{default:t(()=>[...e[66]||(e[66]=[r("确定",-1)])]),_:1})])]),default:t(()=>[a(ge,{type:"info",closable:!1,style:{"margin-bottom":"20px"}},{title:t(()=>[...e[64]||(e[64]=[r(" 隐私空间是您的专属安全区域，所有文档内容将被加密存储。",-1),c("br",null,null,-1),r(" 请设置一个强密码（至少6位），请妥善保管，忘记密码将无法恢复文档！ ",-1)])]),_:1}),a(ke,{model:A.value,"label-width":"100px"},{default:t(()=>[a(G,{label:"密码"},{default:t(()=>[a(V,{modelValue:A.value.password,"onUpdate:modelValue":e[18]||(e[18]=s=>A.value.password=s),type:"password",placeholder:"至少6位","show-password":""},null,8,["modelValue"])]),_:1}),a(G,{label:"确认密码"},{default:t(()=>[a(V,{modelValue:A.value.confirmPassword,"onUpdate:modelValue":e[19]||(e[19]=s=>A.value.confirmPassword=s),type:"password",placeholder:"再次输入密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(N,{modelValue:j.value,"onUpdate:modelValue":e[24]||(e[24]=s=>j.value=s),title:"验证隐私空间密码",width:"400px","close-on-click-modal":!1},{footer:t(()=>[c("span",da,[a(n,{onClick:e[23]||(e[23]=s=>j.value=!1)},{default:t(()=>[...e[68]||(e[68]=[r("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:fe},{default:t(()=>[...e[69]||(e[69]=[r("确定",-1)])]),_:1})])]),default:t(()=>[a(ge,{type:"warning",closable:!1,style:{"margin-bottom":"20px"}},{default:t(()=>[...e[67]||(e[67]=[r(" 您已离开隐私空间超过3分钟，请重新输入密码以继续访问。 ",-1)])]),_:1}),a(V,{modelValue:q.value,"onUpdate:modelValue":e[22]||(e[22]=s=>q.value=s),type:"password",placeholder:"请输入隐私空间密码","show-password":"",onKeyup:xl(fe,["enter"])},null,8,["modelValue"])]),_:1},8,["modelValue"]),a(N,{modelValue:Q.value,"onUpdate:modelValue":e[29]||(e[29]=s=>Q.value=s),title:"修改隐私空间密码",width:"400px"},{footer:t(()=>[c("span",ca,[a(n,{onClick:e[28]||(e[28]=s=>Q.value=!1)},{default:t(()=>[...e[70]||(e[70]=[r("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:he},{default:t(()=>[...e[71]||(e[71]=[r("确定",-1)])]),_:1})])]),default:t(()=>[a(ke,{model:B.value,"label-width":"100px"},{default:t(()=>[a(G,{label:"当前密码"},{default:t(()=>[a(V,{modelValue:B.value.oldPassword,"onUpdate:modelValue":e[25]||(e[25]=s=>B.value.oldPassword=s),type:"password",placeholder:"请输入当前密码","show-password":""},null,8,["modelValue"])]),_:1}),a(G,{label:"新密码"},{default:t(()=>[a(V,{modelValue:B.value.newPassword,"onUpdate:modelValue":e[26]||(e[26]=s=>B.value.newPassword=s),type:"password",placeholder:"至少6位","show-password":""},null,8,["modelValue"])]),_:1}),a(G,{label:"确认新密码"},{default:t(()=>[a(V,{modelValue:B.value.confirmPassword,"onUpdate:modelValue":e[27]||(e[27]=s=>B.value.confirmPassword=s),type:"password",placeholder:"再次输入新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),c("input",{ref_key:"importInput",ref:pe,type:"file",accept:".txt,.md,.json",style:{display:"none"},onChange:Ke},null,544)])}}},ya=ml(va,[["__scopeId","data-v-483c2222"]]);export{ya as default};
